<div class="py-3 px-2 site-box" cdkDrag [cdkDragDisabled]="!editMode || !site.show">
  @if (editMode) {
    <button nz-button [disabled]="site.sort === null" nzType="text" class="me-1" style="cursor: move" cdkDragHandle>
      <fa-icon [icon]="grip"></fa-icon>
    </button>
  }

  <div class="d-flex flex-column w-100">
    <a target="_blank" [href]="site.url" style="color: rgba(255, 255, 255, 0.85); text-decoration: none" class="d-flex w-100 mb-1">
      <div class="d-flex justify-content-center me-2">
        @if (site.siteImage) {
          <img [srcset]="site.siteImage.imagePath" class="site-image" />
        } @else {
          <div class="site-image"></div>
        }
      </div>

      <div>
        {{ site.name }}

        <div style="font-size: 12px">{{ site.description }}</div>
      </div>
    </a>

    @if (editMode) {
      <div class="site-box-second-row">
        <nz-switch [ngModel]="site.show" (ngModelChange)="updateSiteShow($event)" nzSize="small"></nz-switch>

        <button nz-button nzType="text" (click)="openSiteModal.emit(site.id)">
          <fa-icon [icon]="edit"></fa-icon>
        </button>

        <button
          nz-button
          nzType="text"
          nz-popconfirm
          nzPopconfirmTitle="Are you sure you want to delete this site?"
          (nzOnConfirm)="folderStore.deleteSiteHttp({ id: site.id })"
        >
          <fa-icon [icon]="trash"></fa-icon>
        </button>
      </div>
    }
  </div>
</div>
