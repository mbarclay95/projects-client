<nz-modal
  [(nzVisible)]="isVisible"
  [nzTitle]="createOrUpdate + (item?.type === 'dir' ? ' Directory' : ' File')"
  [nzWidth]="modalWidth"
  (nzOnCancel)="isVisible = false"
  nzOkText="Save"
  nzCancelText="Close"
  (nzOnOk)="saveItem()"
  [nzStyle]="modalStyle"
  [nzCancelDisabled]="saving"
  [nzOkDisabled]="saving"
  [nzOkLoading]="saving"
  [nzMaskClosable]="false"
>
  <ng-container *nzModalContent>
    @if (item) {
      <div>
        <div class="w-100 mb-4">
          <div class="mb-2">{{ item.type === "dir" ? "Directory" : "File" }} Name:</div>

          <input nz-input #directoryName [(ngModel)]="newName" class="w-100" />
        </div>

        @if (item.type === "file") {
          <div class="w-100 mb-4">
            <div class="mb-3">Change File Location:</div>

            <div class="ms-2">
              @if (newWorkingDirectory) {
                <div class="mb-2">New Directory: {{ workingDirectoryToString(newWorkingDirectory) }}</div>
                <nz-radio-group class="mb-2" [(ngModel)]="newLocationMode">
                  <label nz-radio nzValue="mv">Move</label>

                  <label nz-radio nzValue="cp">Copy</label>
                </nz-radio-group>
              }

              <div class="d-flex">
                @if (newWorkingDirectory) {
                  <button nz-button class="me-2" nzType="default" (click)="newWorkingDirectory = undefined">Cancel</button>
                }

                <button nz-button nzType="primary" (click)="selectNewLocationClicked()">
                  Select {{ newWorkingDirectory ? "different" : "" }} Directory
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </ng-container>
</nz-modal>
