@if (gamingSessionsFacadeService.devicesLoading() || gamingSessionsFacadeService.sessionsLoading()) {
  <div class="d-flex w-100 justify-content-center align-items-center" style="height: 50vh">
    <nz-spin></nz-spin>
  </div>
} @else {
  <div class="page-container mt-2">

    @if (gamingSessionsFacadeService.userHasSessionDevice$ | async) {
      <app-joined-session
        [activeSession]="(gamingSessionsFacadeService.activeGamingSession$ | async)!"
        [userSessionDeviceId]="(gamingSessionsFacadeService.userSessionDeviceId$ | async)!"
        (editSessionDevice)="openModal.next($event)"
      ></app-joined-session>
    } @else {
      <app-connect-to-device
        [devices]="(gamingSessionsFacadeService.inactiveSessionDevices$ | async) ?? []"
        [activeSession]="(gamingSessionsFacadeService.activeGamingSession$ | async) ?? undefined"
        (deviceSelected)="openModal.next($event)"
      ></app-connect-to-device>
    }
  </div>

  <app-create-edit-session-device-modal
    [openModal]="openModal.asObservable()"
  ></app-create-edit-session-device-modal>
}
