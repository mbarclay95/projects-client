<div class="members-container">

  <div class="member-container" *ngFor="let member of myFamily.members">

    <div class="d-flex align-items-center justify-content-center w-100 mb-2">

      <div class="border me-3"
           style="background: {{member.taskUserConfig?.color}}; border-radius: 2px; width: 25px; height: 25px; cursor: pointer"
           nz-popover nzPopoverTrigger="click" [nzPopoverContent]="colorPicker" nzPopoverPlacement="bottomLeft"
           (nzPopoverVisibleChange)="saveColor(member, $event)"></div>

      <ng-template #colorPicker>
        <div class="mb-2">
          <div class="mb-1">Color:</div>
          <color-chrome (onChangeComplete)="colorChanged($event)"
                        [color]="member.taskUserConfig?.color ?? ''"></color-chrome>
        </div>
        <div>
          <div class="mb-1">Task{{myFamily.taskStrategy === 'per task' ? 's' : ' Points'}} Per Week:</div>
          <nz-input-number class="w-100" [ngModel]="member.taskUserConfig?.tasksPerWeek"
                           (ngModelChange)="tasksPerWeekChanged($event)"></nz-input-number>
        </div>
      </ng-template>

      <div style="font-size: 20px">{{member | firstName}}</div>

    </div>

    <div class="d-flex w-100 flex-column align-items-center mb-4">

      <!--      <div>Total personal tasks: <strong>{{member.taskUserConfig?.totalUserTasks}}</strong></div>-->

    </div>

    <nz-progress nzType="circle" [nzPercent]="member | weeklyProgressPercent : false"
                 class="mb-4"></nz-progress>

    <div class="w-100 d-flex justify-content-center align-items-center mb-2"
         *ngFor="let task of member.taskUserConfig?.completedFamilyTasks">

      <fa-icon *ngIf="loadingUndoId === task.id" [icon]="spinner" [spin]="true" class="me-2"></fa-icon>

      <fa-icon *ngIf="loadingUndoId !== task.id" [icon]="undo" class="me-2" style="color: grey; cursor: pointer"
               nz-popconfirm (nzOnConfirm)="undoTask(task)"
               nzPopconfirmTitle="Are you sure you want to undo this chore?"></fa-icon>

      <div style="font-size: 16px">{{task.name}}
        <span *ngIf="myFamily.taskStrategy === 'per task point'" style="font-style: italic">- {{task.taskPoint?.points}}
          point{{task.taskPoint?.points === 1 ? '' : 's'}}</span></div>

    </div>

    <nz-divider *ngIf="isMobile"></nz-divider>

    <!--    <ngx-charts-pie-chart [results]="member.taskUserConfig | tasksCompleteChartData" [labels]="true"-->
    <!--                          [doughnut]="true" [legend]="false" [maxLabelLength]="12"></ngx-charts-pie-chart>-->

  </div>

</div>
